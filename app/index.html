<!DOCTYPE html>
<html>
<head>
	<title>Wonder Reader</title>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="css/bootstrap-theme.css">
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<!-- <script src="js/jquery-2.2.2.min.js"></script> -->
</head>

<body>
	<div class="header">
		<h1>Header</h1>
		<ul>
			<li>
				<button><i class="fa fa-angle-double-left"></i></button>
			</li>
			<li>
				<button><i class="fa fa-angle-left"></i></button>
			</li>
			<li>
				<button><i class="fa fa-angle-right"></i></button>
			</li>
			<li>
				<button><i class="fa fa-angle-double-right"></i></button>
			</li>
			<li>
				<button id="openFile" onclick="openFile()"><i class="fa fa-folder-open-o"></i></button>
			</li>
		</ul>

	</div>
	<div class="library">
		<h2>Library</h2>
		<ul id="dirLib" class="directory">
			<li><span class="dir">Item 1</span></li>
			<li><span class="dir">Item 2</span></li>
			<li><span class="dir-open">Item 3</span></li>
			<li>
				<ul>
					<li><span class="file">Item A</span></li>
					<li><span class="file">Item B</span></li>
					<ul>
						<li>Item I</li>
						<li>Item II</li>
						<li>Item III</li>
					</ul>
				</ul>
			</li>
			<li><span class="dir">Item 4</span></li>
		</ul>
		<i class="fa fa-caret-right"></i>
	</div>


	<div class="mainWindow">
		<img id="viewDiv" />
	</div>


	<!-- JS SCRIPTS -->
	<script>
		var remote = require('remote');
		var fs = remote.require('fs');
		var util = require('util');
		var stream = require('stream');
		var es = require('event-stream'); // https://github.com/dominictarr/event-stream
		var dialog = remote.require('dialog');
		var $ = require('jquery');
		var cbr = require('cbr');

		var lineNr = 1;

		function openFile() {
			dialog.showOpenDialog({ filters: [
				{ name: 'cbr', extensions: ['cbr'] }
				]},
				// Open File function
				function(fileNames) {
					console.log(fileNames); //logs file in dev tools console
					if (fileNames === undefined) return;
					var fileName = fileNames[0];

					var s = fs.createReadStream('fileName')
						.pipe(es.split())
						.pipe(es.mapSync(function(line) {
								// s.pause(); // Pauses readStream
								// lineNr += 1; // Increments lineNr +1
								// logMemoryUsage(lineNr); // Process line here and call s.resume() when ready
								// s.resume(); // Resumes readStream
							})
							// .on('error', function() {
							// 	console.log('Error while reading file');
							// })
							// .on('end', function() {
							// 	console.log('Read file successful')
							// })
						);


					fs.readFile(fileName, 'utf-8', function(err, data) {
						if (err) throw err;
						console.log('Line 103 good!')
						// s(fileName);
						console.log(s(fileName));
						console.log('IZ GUD!')

						console.log(fileName); // example: "/home/user/(comic).cbr"
						console.log(data);
					});
				}
			);
		}
	</script>
	<script src="js/jquery-app.js"></script>

</body>

</html>
